<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>模块使用频次统计（按部门）</title>
    <link type="text/css" rel="stylesheet" href="/css/jquery-ui.min.css">
    <link type="text/css" rel="stylesheet" href="/css/theme.css">
    <link type="text/css" rel="stylesheet" href="/css/ui.jqgrid.css">
    <!--<link type="text/css" rel="stylesheet" href="/css/ui.jqgrid-bootstarp.css">-->
    <script src="/js/WdatePicker.js"></script>
</head>
<body>

<!--条件-->
开始日期<input class="Wdate" id="sd" onClick="WdatePicker({maxDate:'#F{$dp.$D(\'ed\')}'})"/>
结束日期<input class="Wdate" id="ed" onClick="WdatePicker({minDate:'#F{$dp.$D(\'sd\')}'})"/>
模块
<select id="func">
    <#list funcList as func>
        <option value="${func.id}">${func.func_desc}</option>
    </#list>
</select>
<button id="search">查询</button>
<!--列表-->
<table id="jqg"></table>
<div id="pager"></div>

<!-- ECharts单文件引入 -->
<!--<script src="http://echarts.baidu.com/build/dist/echarts.js"></script>-->
<script src="/js/require.js"></script>
<script src="/js/jquery.js"></script>
<script type="text/javascript">
    // 路径配置
    require.config({
        baseUrl: '/js'
    });

    $("#search").click(function () {

        $("#jqg").setGridParam({
            url: '/syslog/countFunc',
            datatype: 'json',
            postData: {'func': $("#func").val(), 'sd': $("#sd").val(), 'ed': $("#ed").val()}, //发送数据
            page: 1
        }).trigger("reloadGrid"); //重新载入
    });

    require(
            [
                'jquery.jqGrid',
                'i18n/grid.locale-cn',
                'jquery-ui'
            ], function () {
                $("#jqg").jqGrid({
                    url: '/syslog/countFunc',
                    datatype: "json",
                    rownumbers: true,
                    colNames: ["模块", "使用次数"],
                    colModel: [
                        {name: "func_desc", width: 80},
                        {name: "cnt", width: 80}
                    ],
                    rowNum: 10,

                    autowidth: true,
                    rowList: [10, 20, 30],
                    pager: "#pager",
                    rownumbers:true,
                    viewrecords: false,
                    loadonce: true,
                    caption: "模块使用频次统计"

                }).navGrid("#pager", {edit: false, add: false, del: false, search: false, refresh: false});
            }
    );


</script>


</body>
</html>
